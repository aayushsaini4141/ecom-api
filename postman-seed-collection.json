{
  "info": {
    "name": "Ecom API Seed Collection",
    "description": "Seed initial users, categories, and products for ecom-api.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Create Admin User",
      "request": {
        "method": "POST",
        "header": [{"key": "Content-Type", "value": "application/json"}],
        "url": {"raw": "http://localhost:3000/api/auth/signup", "protocol": "http", "host": ["localhost"], "port": "3000", "path": ["api", "auth", "signup"]},
        "body": {"mode": "raw", "raw": "{\"email\":\"admin@ecom.com\",\"password\":\"admin123\",\"role\":\"admin\"}"}
      }
    },
    {
      "name": "Login Admin",
      "event": [{
        "listen": "test",
        "script": {
          "exec": [
            "var json = pm.response.json();",
            "pm.environment.set('ADMIN_TOKEN', json.token);"
          ],
          "type": "text/javascript"
        }
      }],
      "request": {
        "method": "POST",
        "header": [{"key": "Content-Type", "value": "application/json"}],
        "url": {"raw": "http://localhost:3000/api/auth/login", "protocol": "http", "host": ["localhost"], "port": "3000", "path": ["api", "auth", "login"]},
        "body": {"mode": "raw", "raw": "{\"email\":\"admin@ecom.com\",\"password\":\"admin123\"}"}
      }
    },
    {
      "name": "Create Category Electronics",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}"},
          {"key": "Content-Type", "value": "application/json"}
        ],
        "url": {"raw": "http://localhost:3000/api/categories", "protocol": "http", "host": ["localhost"], "port": "3000", "path": ["api", "categories"]},
        "body": {"mode": "raw", "raw": "{\"name\":\"Electronics\",\"description\":\"Electronic items\"}"}
      }
    },
    {
      "name": "Create Category Clothing",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}"},
          {"key": "Content-Type", "value": "application/json"}
        ],
        "url": {"raw": "http://localhost:3000/api/categories", "protocol": "http", "host": ["localhost"], "port": "3000", "path": ["api", "categories"]},
        "body": {"mode": "raw", "raw": "{\"name\":\"Clothing\",\"description\":\"Apparel and fashion\"}"}
      }
    },
    {
      "name": "Create Product Smartphone",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}"}
        ],
        "url": {"raw": "http://localhost:3000/api/products", "protocol": "http", "host": ["localhost"], "port": "3000", "path": ["api", "products"]},
        "body": {
          "mode": "formdata",
          "formdata": [
            {"key": "name", "value": "Smartphone", "type": "text"},
            {"key": "description", "value": "Latest smartphone", "type": "text"},
            {"key": "price", "value": "699.99", "type": "text"},
            {"key": "stock", "value": "50", "type": "text"},
            {"key": "categoryId", "value": "1", "type": "text"}
          ]
        }
      }
    },
    {
      "name": "Create Product T-Shirt",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}"}
        ],
        "url": {"raw": "http://localhost:3000/api/products", "protocol": "http", "host": ["localhost"], "port": "3000", "path": ["api", "products"]},
        "body": {
          "mode": "formdata",
          "formdata": [
            {"key": "name", "value": "T-Shirt", "type": "text"},
            {"key": "description", "value": "Comfortable cotton t-shirt", "type": "text"},
            {"key": "price", "value": "19.99", "type": "text"},
            {"key": "stock", "value": "100", "type": "text"},
            {"key": "categoryId", "value": "2", "type": "text"}
          ]
        }
      }
    }
  ]
}
